---
import Layout from "../layouts/Layout.astro";
const { documentId } = Astro.request.url.searchParams;

// Gebruik documentId om de gegevens op te halen via de API
let book = null;
try {
  book = await fetchApi({
    endpoint: `books/${documentId}`,
    wrappedByKey: "data",
  });
} catch (error) {
  console.error("Error fetching book data:", error);
}
---

<Layout>
  <section>
    <h1>{book?.title || "Boektitel niet gevonden"}</h1>
    <img src={import.meta.env.STRAPI_URL + (book?.cover?.url || "/placeholder-image.jpg")} alt={book?.title || "Geen titel"} />
    <p>Prijs: â‚¬{book?.price || "Niet beschikbaar"}</p>
    <p>{book?.description || "Geen beschrijving beschikbaar."}</p>
  </section>
</Layout>
